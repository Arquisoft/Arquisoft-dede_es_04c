[[section-runtime-view]]
== Runtime View

=== Escenario 1. Registrarse como un nuevo usuario

[plantuml,"escenario1",png]
----
actor Usuario
entity Webapp
entity Restapi
database POD
database MongoDB
Usuario -> Webapp: Rellenar formulario signup
Webapp -> Restapi: Envía los datos
Restapi -> POD: Envía datos personales
Restapi -> MongoDB: Envía datos necesarios
Webapp <-- Restapi: Devuelve token
Usuario <- Webapp: Notifica al usuario
----

Para registrarse, el usuario deberá rellenar el formulario correspondiente. Una vez hecho, se guardarán en la base de datos solo los datos necesarios. El resto de datos personales serán almacenados en el POD.


=== Escenario 2. Iniciar sesión

[plantuml,"escenario2",png]
----
actor Usuario
entity Webapp
entity Restapi
database POD
database MongoDB
Usuario -> Webapp: Rellenar formulario login
Webapp -> Restapi: Envía los datos
Restapi -> POD: Valida los datos
POD --> Restapi: Devuelve los datos privados
Restapi -> MongoDB: Valida los datos
MongoDB --> Restapi: Devuelve los datos correspondientes
Restapi --> Webapp: Devuelve token 
Webapp -> Usuario: Notifica al usuario
----

El usuario deberá rellenar el formulario correspondiente para iniciar sesión. Los datos serán enviados y validados y finalmente se le notificará al usuario si ha introducido los datos correctamente.
